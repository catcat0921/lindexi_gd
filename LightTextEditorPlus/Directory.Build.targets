<Project>

  <ItemGroup>
    <UIFrameworkCompatibilityCode Include="$(MSBuildThisFileDirectory)Build\Shared\UI.Compatibility.Global.g.cs"
                                  Link="Properties\%(Filename)%(Extension)" />
    <LightTextEditorPlusAPIDefineCode Include="$(MSBuildThisFileDirectory)Build\Shared\TextEditor.API.cs" Link="API_\%(Filename)%(Extension)"/>
  </ItemGroup>

  <!-- 自动处理不同 UI 框架之间的差异 -->
  <Choose>
    <When Condition=" '$(UseUIFramework)' == 'Avalonia' ">
      <PropertyGroup>
        <DefineConstants>$(DefineConstants);USE_AVALONIA</DefineConstants>
      </PropertyGroup>
      <ItemGroup>
        <Compile Include="@(UIFrameworkCompatibilityCode)" />
        <Compile Include="@(LightTextEditorPlusAPIDefineCode)" />
        <Compile Remove="**\*.test.cs" />
        <Compile Remove="**\*.uno.cs" />
        <Compile Remove="**\*.wpf.cs" />
      </ItemGroup>
    </When>

    <When Condition=" '$(UseUIFramework)' == 'Uno' ">
      <PropertyGroup>
        <DefineConstants>$(DefineConstants);USE_UNO</DefineConstants>
      </PropertyGroup>
      <ItemGroup>
        <Compile Include="@(UIFrameworkCompatibilityCode)" />
        <Compile Remove="**\*.ava.cs" />
        <Compile Remove="**\*.test.cs" />
        <Compile Remove="**\*.wpf.cs" />
      </ItemGroup>
    </When>
    <When Condition=" '$(UseUIFramework)' == 'Wpf' ">
      <PropertyGroup>
        <DefineConstants>$(DefineConstants);USE_WPF</DefineConstants>
      </PropertyGroup>
      <ItemGroup>
        <Compile Include="@(UIFrameworkCompatibilityCode)" />
        <Compile Include="@(LightTextEditorPlusAPIDefineCode)" />
        <Compile Remove="**\*.ava.cs" />
        <Compile Remove="**\*.test.cs" />
        <Compile Remove="**\*.uno.cs" />
      </ItemGroup>
    </When>
    <When Condition=" '$(UseUIFramework)' == 'Skia' ">
      <PropertyGroup>
        <DefineConstants>$(DefineConstants);USE_SKIA</DefineConstants>
      </PropertyGroup>
      <ItemGroup>
        <Compile Include="@(UIFrameworkCompatibilityCode)" />
        <Compile Include="@(LightTextEditorPlusAPIDefineCode)" />
      </ItemGroup>
    </When>
       <When Condition=" '$(UseUIFramework)' == 'MauiGraphics' ">
      <PropertyGroup>
        <DefineConstants>$(DefineConstants);USE_MauiGraphics</DefineConstants>
      </PropertyGroup>
      <ItemGroup>
        <Compile Include="@(UIFrameworkCompatibilityCode)" />
        <Compile Include="@(LightTextEditorPlusAPIDefineCode)" />
      </ItemGroup>
    </When>
    <When Condition=" '$(UseUIFramework)' == 'Test' ">
      <PropertyGroup>
        <DefineConstants>$(DefineConstants);USE_TEST</DefineConstants>
      </PropertyGroup>
      <ItemGroup>
        <Compile Include="@(UIFrameworkCompatibilityCode)" />
        <Compile Remove="**\*.ava.cs" />
        <Compile Remove="**\*.uno.cs" />
        <Compile Remove="**\*.wpf.cs" />
      </ItemGroup>
    </When>
  </Choose>

</Project>