- 文本库核心
  - [x] 基础文本
    - [x] 字体字号，加粗斜体，颜色
  - [ ] 字体管理
    - [ ] 字体管理器
    - [x] 字体缓存
    - [x] 字体回滚
  - [ ] 文本装饰
    - [x] 下划线模块
    - [x] 删除线模块
    - [x] 波浪线模块
    - [ ] 着重点模块
  - [x] 项目符号
    - [x] 有序项目符号
  - [ ] 上下标
  - [ ] 支持上加音标 Ruby 拼音
  - [ ] 支持下加注释
  - [x] 行距
    - [x] 倍数行距
      - [x] 修复 Avalonia 的行距渲染或布局问题，不能是简单居下
    - [x] 支持 PPT 和 WPF 字体算法
    - [x] 固定行距
  - [ ] 支持文档获取 SaveInfo 序列化存储
    - [ ] 如果设置为宽度高度自适应，存储设置了宽度高度，那么是否应该重新计算？还是直接存储设置的宽度高度
  - [x] 缩进
    - [x] 首行缩进
      - [x] 缩进是否考虑不同字体字号用不同的缩进
        - 不考虑。因为使用字符作为单位，会导致一修改字体字号排版就乱了
    - [x] 缩进等级
    - [x] 左边距
    - [x] 右边距
    - [x] 段前段后上下距离
  - [ ] 对齐
    - [x] 左对齐
    - [x] 居中对齐
    - [x] 右对齐
    - [ ] 分散对齐
    - [ ] 两端对齐
  - [ ] 光标系统
    - 项目符号
      - 在空段里面，如果设置项目符号，在光标落在此空段内，将会显示半透明的项目符号。可以提供开关，给底层进行设置，或者是只是触发一个平台渲染层，因为没有影响布局
    - 光标落在 \r\n 的中间的处理
    - 光标变更的时候，可视化的光标是否跟随文本字符属性的颜色和字号，以及横排和竖排，以及光标所在的坐标，这是需要通知到渲染层
  - [x] 垂直居中 垂直底部
  - [x] 竖排文本
  - [x] 蒙文竖排文本
  - [x] 表情 emoji 的支持
  - [ ] 阿拉伯语希伯来语的支持 Bidi 支持
  - [ ] 合写字的排版支持
  - [ ] 艺术字排版支持
  - [ ] 指定排版渲染范围，支持长文本
  - [ ] 图文混排
  - [ ] 公式
  - [ ] 遮罩功能
  - [ ] 指导渲染
    - 从存储里面获取布局信息。不需要再次排版

- 文本库
  - [ ] 编辑器
    - [x] 提供只读功能
      - [x] 完成 Avalonia WPF 版本的可编辑状态支持
    - [ ] 支持各个编辑的注入过滤，如粘贴前过滤、输入键入文本过滤
  - [ ] API
    - [ ] 全局在 Demo 项目尽量不要调用二级的 API 层
    - [x] 将 ParagraphProperty 段落属性设置放在顶层

- 文本平台
  - [x] 全平台
    - [x] 开放顶级 Text 属性，且此属性支持绑定
  - [ ] 像素对齐光标
  - [ ] 允许设置平台字体
    - [ ] WPF 允许设置 FontFamily 类型
    - [ ] Skia 系允许设置 SKTypeface 类型
    - 让 FontName 改成接口，这样可以上层 new 方式重写，带平台属性
  - [ ] 合写字的渲染支持
  - [ ] 支持字背景色
  - [ ] 艺术字的渲染支持
  - [ ] 换行分行算法对接
    - [ ] 对接 ICU 库
    - [ ] 对接 Avalonia 的文本排版简化版本 ICU 处理
    - [ ] 对接 WPF 的 DriectWrite 处理
    - [ ] 对接单词处理
      - [ ] 双击选中单词
      - [ ] 使用 ctrl 加左右跳转单词
  - [ ] 提供剪贴板相关事件
    - [ ] 参考 WinUI 的 API 支持 Paste 、CopyingToClipboard 、 CuttingToClipboard 事件
      - https://github.com/microsoft/microsoft-ui-xaml/blob/3b4ee2bd3de498e27517e82cf840acd000970ffc/src/dxaml/xcp/tools/XCPTypesAutoGen/Modules/Controls/RichEditBox.cs#L296
  - [x] 输入模式支持 Overtype Mode 模式
    - 按下 Insert 键可切换为插入或替换覆盖模式
  - [ ] WPF 平台
    - [ ] 重新设计 RunProperty 字符属性
      - [x] 添加获取默认的 WPF 的 RunProperty 类型
      - [x] 替换 WPF 获取到的 IRunProperty 接口为 RunProperty 类型
      - [ ] 将 RunProperty 的 _cacheFallbackGlyphTypeface 放在布局过程里面，布局完成之后可以扔掉
  - [ ] Avalonia 平台
    - [x] 鼠标拖动选中文本
    - [x] ~~支持禁用输入法~~ 交给平台处理
    - [x] 鼠标移动到文本框应该是输入光标
    - [x] 键盘的持续按下事件
      - [x] 持续退格事件 8f8f9148f52b244095946643b96ffa402861d8cb
    - [x] 文本光标的高度不正确，光标命中不正确
      - 复现步骤： 添加字号 15 文本，添加字号50文本，鼠标修改光标。可见光标的高度不正确
    - [x] 输入法 IME 光标定位
    - [x] 渲染问题
      - [x] 宽度自适应之后修改宽度，渲染没有更新
        - 复现步骤：输入一行长文本，设置宽度自适应，再设置自适应为手动。可见超出文本框部分渲染没有更新
        - 修复版本： b16f84fe89f6c511104a21dfda8e7dc16066f1eb
      - [x] 切换 Tab 再回来，文本无渲染
        - 复现步骤： 运行 Demo 项目，切换调试和测试 Tab 即可
    - [x] 渲染华文仿宋字体错误

- 测试
  - 平台测试
    - [ ] 添加图片对比测试
      - [x] 完成 Avalonia 平台的测试

- [x] 分析器
  - [x] 添加 API 分析
    - [x] 要求某个文件符合某个 API 约定，约定只约定成员命名和顺序，不约定成员类型
    - 比如说对于 CaretConfiguration 的要求是有 CaretThickness CaretBrush SelectionBrush 成员，则所有写明此约束的 API 都应该有这三个成员，但是不约定这三个成员的类型
    - [x] 允许添加多个 API 约束特性
  - [x] 添加 TextEditorPublicAPIAttribute 分析。禁止框架内部调用标记了此特性的成员

- 三方应用
  - [ ] 支持控制台文本编辑器
  - [ ] 双排对应的 Markdown 编辑器
    - [ ] 需要某个段落被删除的同步逻辑
    - [x] 需要同步段落高度
    - [x] 滚动支持

- 代码实现优化
  - [ ] 考虑 Backtracking 单词作为回溯
  - [x] ITextEditorSkiaRender 需要有一个更加基础的接口，用于提供文本的排版信息，而不是直接提供绘制信息
  - [x] 提供 ForceRedraw 机制，用于布局时使用
    - [x] 完成 Avalonia 平台添加
  - [x] 打包提供合并平台，减少程序集引用
    - [x] 删除 System.Drawing.Common 的引用
    - [x] 将 StyleChangeEventArgs 作为共享代码
  - [x] LineDrawingArgument 的 TextSize 改名为 LineSize
  - [ ] 考虑拆分平台 PlatformProvider 和 Handlers 功能，将部分支持定制的，换成 Handlers 功能。如 IWordDivider 可以考虑是注入的而不是平台相关

- 问题处理
  - [x] Avalonia 的 Demo 竖排内容过于右边
    - 问题号： fb2db57
    - 解决版本： 1ba8c075e112f92f3c79623be13216320a656308
  - [x] 无序项目符号渲染偏上
    - 问题号： b232def
    - 原因：没有取当前行的最大字符的基线。解决方法是取当前段落首行的最大字符的基线，但于此也会在空段寻找错误基线
    - 解决版本：6c076c9f9a3f46a4287694f4af5fd97a70b4bcb2
  - [x] Skia 竖排情况下，前面包含文本内容将导致行高错误
    - 原因：没有分开文本行的内容尺寸和字符尺寸，计算时忽略了字符本身的距离
    - 解决版本：2c07e5e8106e88111174383062172117d752f197
  - [x] 竖排转横排，文本的字符宽度和逻辑宽度不相同
    - 问题号： 442753
    - 步骤：创建竖排文本，切换为横排，打开调试着色，可见字符宽度和逻辑宽度不相同，鼠标光标命中不正确
    - 修复版本： 20ab2f02f1ccd1dc53419b401e2421a5034020b9
  - [x] Skia 竖排文本的垂直字距不正确
    - 如果不用 `renderBounds.Height` 则 charHeight 过大，导致行距过大。如果使用 `renderBounds.Height`，则行距过小，导致 q 和 i 重叠 9987cc70378f4d0764b52883c9cef164b2b2a5eb
    - 解决方法参阅 [WPF 探索 Skia 的竖排文本渲染的字符高度 - lindexi - 博客园](https://www.cnblogs.com/lindexi/p/18815810 ) 和《Skia 垂直直排竖排文本字符尺寸间距.enbx》
    - 修复代码 ec3813c82feafd2aac3df8c2cf8e67d388df9f68
  - [x] 两行文本进行选择，选择范围重叠 81bd54adbb66ffda6b90118610b0d63223e66e60
  - [x] 加上滚动条之后，右侧文本编辑器无法被命中下半部分
    - 问题号：b003ee
    - 步骤： 运行 LightTextEditorPlus.AvaloniaDemo 然后尝试命中 DualEditorUserControl 的右侧文本编辑器下半部分
    - 修复版本： eb3ace82d843687333e0425b6c35a60d395c5c2f
  - [x] 鼠标命中空段，光标没有设置在行首 20584b96707fee2fd11dbe47df8b42ad874001bf
  - [x] 光标在第二段首个字符之后，退格删除，光标不在首个字符之前
    - 修复版本： dbdb2aec08602687aa97ecac71ee27c225fba7fb
  - [x] 修复基线对齐之后，渲染华文中宋字体，字符在行线之外，超过文本框
    - 问题号： 3017cc9-华文中宋字体渲染在行外
    - 测试版本： d1b72d7bb3586450824d451ed98aa1402161e22a
    - 字体测量部分，字体高度带上了行距。布局没有做基线对齐
      - 引入问题： 使用 Javanese Text 或 Myanmar Text 字体，字符在行线之外，超过文本框
        - 经过测试，发现只有 PPT 下才能处理，在 Word 等，都是走 WPF 行距算法，提升行高从而解决问题
        - [Javanese Text - Typography - Microsoft Learn](https://learn.microsoft.com/zh-hk/typography/font-list/javanese-text )